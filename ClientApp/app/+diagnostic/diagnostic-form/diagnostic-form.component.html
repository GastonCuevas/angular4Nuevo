<div class="row">
    <div class="col s12">
        <div class="card">
            <div class="card-content">
                <span class="card-title center-align">{{ id ? 'Editar ' : 'Nuevo '}} Diagnóstico</span>
                <loading *ngIf="isLoading"></loading>
                <form #f="ngForm" [formGroup]="form" (ngSubmit)="saveDiagnostic()" *ngIf="!isLoading && !!form">
                    <div class="row">
                        <div class="input-field col s12 m6">
                            <input id="code" class="validate" formControlName="code" type="text" pattern="(?=.*[a-zA-Z0-9]{1}).{1,}" maxlength="20" required>
                            <label for="code" [class.active]="form.value.code">Código</label>
                            <app-control-error-message [form]="f" [control]="{key:'code'}"></app-control-error-message>
                        </div>
                        <div class="input-field col s12 m6">
                            <input id="name" class="validate" formControlName="name" type="text" maxlength="100" required>
                            <label for="name" [class.active]="form.value.name">Descripción</label>
                            <app-control-error-message [form]="f" [control]="{key:'name'}"></app-control-error-message>
                        </div>
                    </div>
                    <div class="row-buttons center-align">
                        <button-submit
							[btntext]="'Guardar'" [btntextLoading]="'Guardando...'" [loadingGlobal]="true"
							btnType="submit" [btnDisabled]="!form.valid"  [isLoading]="isSaving" >
						</button-submit>
                        <button type="button" class="waves-effect waves-light btn btn-form center red" (click)="onCancelButton()">Cancelar</button>
                    </div>
                </form>
                <app-not-found *ngIf="!isLoading && !form" [returnPath]="'/archivos/diagnosticos'"></app-not-found>
            </div>
        </div>
    </div>
</div>
<app-modal-confirm
    [title]="id ? 'Editar' : 'Alta'"
    [message]="'¿Desea regresar sin guardar los cambios?'"
    [openModalSubject]="openModalDiscardSubject"
    (agree)="discardChanges()">
</app-modal-confirm>